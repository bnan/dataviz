<!DOCTYPE html>
<html>
  <head>
    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
        
        position:relative;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
    <script   src="https://code.jquery.com/jquery-3.1.1.min.js"   integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="   crossorigin="anonymous"></script>
    <link rel="stylesheet" href="http://bootswatch.com/sandstone/bootstrap.min.css" media="screen">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="test.js" type="text/javascript" ></script>
    <link rel="stylesheet" type="text/css" href="teste.css">
  </head>
  <body>
    <div class="row">
    <div class="side-menu" style="z-index:1">
    <nav class="navbar navbar-default" role="navigation">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
        <div class="brand-wrapper">
            <!-- Hamburger -->
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Brand -->
            <div class="brand-name-wrapper">
                <a class="navbar-brand" href="#">
                    HackENEI
                </a>
            </div>

            <!-- Search -->
            <a data-toggle="collapse" href="#search" class="btn btn-default" id="search-trigger">
                <span class="glyphicon glyphicon-search"></span>
            </a>

            <!-- Search body -->
            <div id="search" class="panel-collapse collapse">
                <div class="panel-body">
                    <form class="navbar-form" role="search">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search">
                        </div>
                        <button type="submit" class="btn btn-default "><span class="glyphicon glyphicon-ok"></span></button>
                    </form>
                </div>
            </div>
        </div>

    </div>

    <!-- Main Menu -->
    <div class="side-menu-container">
        <ul class="list-group">
                <a href="#"><span class="glyphicon glyphicon-send"></span> Filtrar</a>
                <div class="panel-body">
                    <ul class="list-group">
                        <div class="input-group input-group-sm">
                            <span class="input-group-addon" id="start">Start:</span>
                            <input type="text" class="form-control" id="startDate" aria-describedby="basic-addon3">
                        </div>
                        <div class="input-group input-group-sm">
                            <span class="input-group-addon" id="basic-addon3">End:</span>
                            <input type="text" class="form-control" id="basic-url" aria-describedby="basic-addon3">
                        </div>
                    </ul>
                </div>
        </ul>
    </div><!-- /.navbar-collapse -->
</nav>
    
    </div>

    <!-- Main Content -->
    <div class="container-fluid">
        <div class="side-body">
        </div>
    </div>
</div>
<div id="map"></div>
    <script>
      var map;
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          zoom: 10,
          center: {lat: 40.668809, lng: -73.876674},
          mapTypeId: 'terrain'
        });

        // Create a <script> tag and set the USGS URL as the source.
        var script = document.createElement('script');

        // This example uses a local copy of the GeoJSON stored at
        // http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_week.geojsonp
        //script.src = 'https://developers.google.com/maps/documentation/javascript/examples/json/earthquake_GeoJSONP.js';
        //document.getElementsByTagName('head')[0].appendChild(script);
        var data = '{ "points" : [{ "coordinates":[40.7924881, -73.3973389] , "count":500, "name":"Pine St", "date": "2013-04-09T23:00:00" },{ "coordinates":[40.668809, -73.876674] , "count":100, "name":"Pine St", "date": "2013-04-09T23:00:00" } ]}';
        eqfeed_callback(data);
      }

      function get_coords(latA, lonA, latB, lonB) {
        var latM = ( latA + latB ) / 2.0;
        var lonM = ( lonA + lonB ) / 2.0;
        return (latM, lonM);
      }


      function eqfeed_callback(results) {
        var p = JSON.parse(results);

        var heatmapData = [];
        console.log(p);
        for (var i = 0; i < p.points.length; i++) {
          var coords = p.points[i].coordinates;
          var latLng = new google.maps.LatLng(coords[0], coords[1]);
          var magnitude = p.points[i].count;
          var weightedLoc = {
            location: latLng,
            weight: magnitude
          };
          heatmapData.push(weightedLoc);
        }
        var heatmap = new google.maps.visualization.HeatmapLayer({
          data: heatmapData,
          dissipating: false,
          map: map,
          dissipating: false
        });
      }
    </script>
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB9rPOdNzyhAZf3AMirNiVknXqHFkX-S8g&libraries=visualization&callback=initMap">
    </script>
</body>